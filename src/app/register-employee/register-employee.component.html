<app-header-top></app-header-top>
<h1>Регистрация как соискателя.</h1>
<form [formGroup]="myForm" novalidate (ngSubmit)="submit()">
  <div class="form-row">
    <div class="form-group col-md-2">
      <label>Имя пользователя</label>
      <input type="text" class="form-control" id="userName" formControlName="userName">
    </div>

    <div class="form-group col-md-3">

      <!-- Проверяем вносимый логин. Если логин уже есть в базе, показываем лейбл -Имя пользователя занято, или наоборот
    -->

    <div class="alert alert-danger"
         *ngIf="myForm.controls['userName'].touched && myForm.controls['userName'].value.length === 0 ">
      Не указано имя
    </div>

    <div *ngIf="myForm.controls['userName'].value.length > 0">
      <div *ngIf="myForm.controls['userName'].invalid; else trueUserNameTemplate">
        <div class="alert alert-danger">Имя пользователя занято</div>
      </div>

      <ng-template #trueUserNameTemplate>
        <div class="alert alert-info">Имя пользователя свободно</div>
      </ng-template>

  </div>
      <!-- закончили проверку логина -->
    </div>

  </div>

  <div class="form-row">
    <div class="form-group col-md-3">
      <label for="inputEmail">Email</label>
      <input type="email" class="form-control" id="inputEmail" placeholder="Email" formControlName="userEmail" formControlName="userEmail">
    </div>

    <div class="alert alert-danger"
         *ngIf="myForm.controls['userEmail'].invalid && myForm.controls['userEmail'].touched">
      Некорректный email
    </div>

  </div>

  <div class="form-row">
    <div class="form-group col-md-3">
      <label for="inputPassword1">Пароль</label>
      <input type="password" class="form-control" id="inputPassword1" placeholder="Password" formControlName="userPassword1">

    </div>
  </div>

  <div class="form-group">
    <div class="form-check">
      <label class="form-check-label">
        <input class="form-check-input" type="checkbox" formControlName="cbLicense">
        Я согласен с правилами использования
      </label>
      <div class="alert alert-danger"
           *ngIf="myForm.controls['cbLicense'].invalid && myForm.controls['cbLicense'].touched">
        Согласитесь с лицензией
      </div>
      <br>

      <a class="nav-link" routerLink="/rules" routerLinkActive="active">Прочитать правила использования.</a>
    </div>
  </div>

  <button class="btn btn-primary" [disabled]="myForm.invalid">Зарегистрироваться</button>
</form>
